pod:
  replicas:
    api: 1

helm3_hook: true

# Make dependencies explicit so db-init doesn't wait on itself
dependencies:
  db_init:
    jobs:
      - keystone-db-password-fix
    services:
      - service: mariadb
        namespace: osh-infra

  db_sync:
    jobs:
      - keystone-db-init
    services:
      - service: mariadb
        namespace: osh-infra

endpoints:
  oslo_db:
    hosts:  
      default: mariadb
    namespace: osh-infra
    scheme: mysql+pymysql
    port: 
      mysql: 
        default: 3306
    auth:
      admin:
        username: root
      keystone: 
        username: keystone
  oslo_messaging:
    host_fqdn_overrides:
      default: rabbitmq.osh-infra.svc.cluster.local
    hosts: 
      default: rabbitmq
    namespace: osh-infra
    scheme: 
      default: rabbit
      admin: http
      management: http
      http: http
    port:
      amqp:
        default: 5672
      http:
        default: 15672
      management:
        default: 15672
    path:
      default: /keystone
      admin: ""
      management: ""
    auth:
      admin:
        username: rabbitmq
      keystone: 
        username: keystone

  oslo_cache:
    hosts:
      default: osh-memcached-memcached
    namespace: osh-infra
    port:
      memcache:
        default: 11211
  identity:
    auth:
      admin:
        username: admin
        project_name: admin
        user_domain_name: Default
        project_domain_name: Default


