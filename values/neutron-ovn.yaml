manifests:
  job_bootstrap: true
  job_db_init: true
  job_db_sync: true
  job_ks_user: true
  job_ks_service: true
  job_ks_endpoints: true
  job_rabbit_init: true

  deployment_server: true
  deployment_rpc_server: true
  service_server: true
  ingress_server: false

  # OVN only (no legacy agents)
  daemonset_ovn_metadata: true
  daemonset_ovs_agent: false
  daemonset_linuxbridge_agent: false
  daemonset_sriov_agent: false
  daemonset_dhcp_agent: false
  daemonset_l3_agent: false
  daemonset_metadata_agent: false

conf:
  neutron:
    DEFAULT:
      core_plugin: ml2
      # IMPORTANT for OVN:
      service_plugins: ovn-router
  plugins:
    ml2:
      mechanism_drivers: ovn
      type_drivers: geneve,flat,vlan
      tenant_network_types: geneve
      extension_drivers: port_security
    ml2_type_geneve:
      vni_ranges: 1:10000
    ml2_type_flat:
      flat_networks: physnet1
    ml2_type_vlan:
      network_vlan_ranges: physnet1:100:200
endpoints:
  identity:
    hosts: { default: keystone-api }
    namespace: openstack
    port: { api: { default: 5000 } }
    path: { default: /v3 }
    scheme: { default: http }
    auth:
      neutron:
        username: neutron
        project_name: service
        user_domain_name: Default
        project_domain_name: Default

  oslo_messaging:
    host_fqdn_overrides:
      default: rabbitmq.osh-infra.svc.cluster.local
    hosts: { default: rabbitmq }
    namespace: osh-infra
    scheme: { default: rabbit }
    port: { amqp: { default: 5672 } }
    path: { default: /neutron }
    auth:
      admin:   { username: rabbitmq }
      neutron: { username: neutron }

  oslo_db:
    hosts: { default: mariadb }
    namespace: osh-infra
    scheme: { default: mysql+pymysql }
    path: { default: /neutron }
    port: { mysql: { default: 3306 } }
    auth:
      admin:   { username: root }
      neutron: { username: neutron }
  
dependencies:
  static:
    neutron_server:
      service:
        - endpoint: memcached
          namespace: osh-infra
    neutron_rpc_server:
      service:
        - endpoint: memcached
          namespace: osh-infra
