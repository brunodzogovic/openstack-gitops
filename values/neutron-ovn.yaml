manifests:
  job_bootstrap: true
  job_db_init: true
  job_db_sync: true
  job_ks_user: true
  job_ks_service: true
  job_ks_endpoints: true
  job_rabbit_init: true

  deployment_server: true
  deployment_rpc_server: true
  service_server: true
  ingress_server: false

  daemonset_ovn_metadata: true
  daemonset_ovs_agent: false
  daemonset_linuxbridge_agent: false
  daemonset_sriov_agent: false
  daemonset_dhcp_agent: false
  daemonset_l3_agent: false
  daemonset_metadata_agent: false

conf:
  neutron:
    DEFAULT:
      core_plugin: ml2
      service_plugins: ovn-router
  plugins:
    ml2:
      mechanism_drivers: ovn
      type_drivers: geneve,flat,vlan
      tenant_network_types: geneve
      extension_drivers: port_security
    ml2_type_geneve:
      vni_ranges: "1:10000"
    ml2_type_flat:
      flat_networks: physnet1
    ml2_type_vlan:
      network_vlan_ranges: "physnet1:100:200"

endpoints:
  identity:
    name: keystone
    hosts:
      default: keystone
      internal: keystone-api
    host_fqdn_override:
      default: null
    path:
      default: /v3
    scheme: 
      default: http
    port:
      api:
        default: 80
        internal: 5000
    auth:
      admin:
        region_name: RegionOne
        username: admin
        project_name: admin
        user_domain_name: default
        project_domain_name: default
      neutron:
        # keep password ONLY in secrets.sops.yaml
        role: admin,service
        region_name: RegionOne
        username: neutron
        project_name: service
        user_domain_name: service
        project_domain_name: service
      nova:
        role: admin,service
        region_name: RegionOne
        project_name: service
        username: neutron_nova
        user_domain_name: service
        project_domain_name: service
      placement:
        role: admin,service
        region_name: RegionOne
        project_name: service
        username: neutron_placement
        user_domain_name: service
        project_domain_name: service
      designate:
        role: admin,service
        region_name: RegionOne
        project_name: service
        username: neutron_designate
        user_domain_name: service
        project_domain_name: service
      ironic:
        role: admin,service
        region_name: RegionOne
        project_name: service
        username: neutron_ironic
        user_domain_name: service
        project_domain_name: service

  oslo_messaging:
    hosts:
      default: rabbitmq
    host_fqdn_override:
      default: null
    path: /neutron
    scheme: rabbit
    port:
      amqp:
        default: 5672
    auth:
      admin:
        username: rabbitmq
      neutron:
        username: neutron
    namespace: osh-infra

  oslo_db:
    hosts:
      default: mariadb
    host_fqdn_override:
      default: null
    path: /neutron
    scheme: mysql+pymysql
    port:
      mysql:
        default: 3306
    auth:
      admin:
        username: root
      neutron:
        username: neutron
    namespace: osh-infra

  oslo_cache:
    auth:
      memcache_secret_key: null
    hosts:
      default: memcached
    namespace: osh-infra
    host_fqdn_override:
      default: null
    port:
      memcache:
        default: 11211

  compute:
    name: nova
    hosts:
      default: nova-api
      public: nova
    host_fqdn_override:
      default: null
    path:
      default: "/v2.1/%(tenant_id)s"
    scheme:
      default: 'http'
    port:
      api:
        default: 8774
        public: 80
      novncproxy:
        default: 6080

  compute_metadata:
    name: nova
    hosts:
      default: nova-metadata
      public: metadata
    host_fqdn_override:
      default: null
    path:
      default: /
    scheme:
      default: 'http'
    port:
      metadata:
        default: 8775
        public: 80

  network:
    name: neutron
    hosts:
      default: neutron-server
      public: neutron
    host_fqdn_override:
      default: null
      # NOTE(portdirect): this chart supports TLS for fqdn over-ridden public
      # endpoints using the following format:
      # public:
      #   host: null
      #   tls:
      #     crt: null
      #     key: null
    path:
      default: null
    scheme:
      default: 'http'
      service: 'http'
    port:
      api:
        default: 9696
        public: 80
        service: 9696
        
dependencies:
  static:
    neutron_server:
      service:
        - endpoint: memcached
          namespace: osh-infra
    neutron_rpc_server:
      service:
        - endpoint: memcached
          namespace: osh-infra
